{% extends 'blog/base.html' %}
{% block content %}
<!-- Styles -->
<!-- HTML -->
<div id="chartdiv"></div>
<style>
#chartdiv {
    width: 100%;
    height: 500px;
}
</style>
<!-- Resources -->
<script src="https://cdn.amcharts.com/lib/5/index.js"></script>
<script src="https://cdn.amcharts.com/lib/5/percent.js"></script>
<script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
<!-- Chart code -->
<script>
am5.ready(function() {

    var root = am5.Root.new("chartdiv");

    root.setThemes([
        am5themes_Animated.new(root)
    ]);

    var chart = root.container.children.push(
        am5percent.PieChart.new(root, {
            endAngle: 270
        })
    );

    var series = chart.series.push(
        am5percent.PieSeries.new(root, {
            valueField: "value",
            categoryField: "category",
            endAngle: 270
        })
    );

    series.states.create("hidden", {
        endAngle: -90
    });

    series.data.setAll([{% for post in posts %}{
        category: "{{ post.name }}",
        value: {{ post.quantity }}
    },{% endfor %}
    ]);

    series.appear(1000, 100);

});
</script>
{% endblock content %}